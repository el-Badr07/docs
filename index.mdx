---
title: "Textra Documentation"
description: "Comprehensive technical documentation for Textra's intelligent accounting automation platform"
---

Welcome to the technical documentation for Textra, an intelligent accounting automation platform that transforms manual invoice processing into streamlined, AI-powered workflows with French PCG compliance.

## Platform Overview

Textra is a sophisticated **multi-service architecture** that combines cutting-edge AI technology with robust accounting principles to deliver:

- **Intelligent Document Processing**: Advanced OCR and LLM-powered extraction from invoices, receipts, and financial documents
- **French PCG Compliance**: Complete integration with Plan Comptable Général for regulatory compliance
- **Multi-Conversation AI Interface**: Sophisticated chat system with specialized AI agents for different accounting tasks
- **Real-Time Processing Pipeline**: 5-phase automated pipeline from document upload to balanced journal entries
- **Enterprise Scalability**: MongoDB, Redis, and RabbitMQ architecture designed for high-volume processing

---

## Architecture Deep Dive

### Core Services Documentation

<CardGroup cols={2}>
  <Card title="Database Service" icon="database" href="/services/database">
    **MongoDB-based persistence layer** managing the complete invoice processing lifecycle through 6 specialized collections with comprehensive indexing and performance optimization strategies.
  </Card>
  <Card title="Cache Service" icon="bolt" href="/services/cache">
    **Redis-powered intelligent caching** with multi-layer strategies, adaptive TTL management, and sophisticated invalidation patterns optimized for accounting workflows.
  </Card>
  <Card title="Conversation Service" icon="comments" href="/services/conversation">
    **Multi-conversation AI chat system** enabling parallel conversations with specialized agents, context preservation, and seamless integration with accounting operations.
  </Card>
  <Card title="File Service" icon="folder" href="/services/file">
    **Secure file management** with multi-format support, automatic organization, and integration with the processing pipeline for documents and exports.
  </Card>
</CardGroup>

### API Reference

<CardGroup cols={2}>
  <Card title="Accounting API" icon="calculator" href="/api-reference/accounting">
    **Comprehensive accounting automation API** with 50+ endpoints covering invoice processing, PCG integration, payment management, and financial reporting.
  </Card>
  <Card title="Conversations API" icon="message-circle" href="/api-reference/conversations">
    **Multi-conversation management API** for creating, managing, and integrating AI-powered conversations with accounting workflows.
  </Card>
  <Card title="Financial Documents API" icon="file-text" href="/api-reference/financial-documents">
    **Document processing API** supporting multiple financial document types beyond invoices, including bank statements and receipts.
  </Card>
  <Card title="Voice API" icon="mic" href="/api-reference/voice">
    **Voice interaction capabilities** using LiveKit for real-time voice conversations with AI agents about accounting data.
  </Card>
</CardGroup>

---

## Data Models & Architecture

### Comprehensive Data Models

<CardGroup cols={2}>
  <Card title="Accounting Models" icon="chart-line" href="/models/accounting">
    **Sophisticated Pydantic models** with 15+ data structures covering the complete accounting pipeline from extraction to journal entries, with built-in validation and French PCG compliance.
  </Card>
  <Card title="Conversation Models" icon="users" href="/models/conversation">
    **Chat system data structures** managing conversation threads, message metadata, user contexts, and AI agent interactions with MongoDB integration.
  </Card>
  <Card title="Internal Models" icon="cog" href="/models/internal">
    **System-level models** for configuration management, task tracking, performance monitoring, and internal service communication.
  </Card>
</CardGroup>

### Utility Systems

<CardGroup cols={2}>
  <Card title="LLM Helpers" icon="brain" href="/utils/llm-helpers">
    **Multi-provider AI integration** supporting Groq, Gemini, and OpenAI with intelligent provider selection, schema-driven prompts, and sophisticated response validation.
  </Card>
  <Card title="PCG Loader" icon="book" href="/utils/pcg-loader">
    **French Chart of Accounts integration** with 8000+ account mappings, intelligent caching, validation rules, and compliance checking for automated account mapping.
  </Card>
</CardGroup>

---

## Processing Pipeline Architecture

### 5-Phase Intelligent Processing

The Textra accounting pipeline represents a sophisticated **5-phase processing architecture** that transforms raw invoice documents into compliance-ready accounting entries:

#### Phase 1: Intelligent Document Extraction
- **Advanced OCR Processing**: LLMWhisperer integration with PyMuPDF for superior text extraction
- **Multi-Provider LLM Integration**: Automatic provider selection based on document complexity
- **Confidence Scoring**: Sophisticated algorithms assessing extraction quality and completeness
- **Language Detection**: Automatic detection and appropriate processing for French, English, and Arabic documents

#### Phase 2: PCG Account Mapping
- **Intelligent Vendor Recognition**: AI-powered mapping of vendors to appropriate supplier accounts (401xxx series)
- **Product Categorization**: Sophisticated classification of products/services to expense accounts (6xx series)
- **VAT Account Handling**: Automatic mapping to appropriate VAT accounts based on rates and transaction types
- **Confidence-Based Validation**: Multi-level confidence scoring with human review triggers

#### Phase 3: Journal Entry Generation
- **Double-Entry Validation**: Automatic enforcement of fundamental accounting principles
- **French Accounting Compliance**: Proper journal classification (JA, JV, BQ, OD) according to French standards
- **Balance Verification**: Mathematical validation ensuring debits equal credits
- **Multi-Language Descriptions**: Journal descriptions in French, English, and Arabic

#### Phase 4: Enhanced Validation & Enrichment
- **Due Date Calculations**: Automatic calculation based on payment terms and business rules
- **VAT Reconciliation**: Sophisticated VAT validation and correction algorithms
- **Cross-Reference Validation**: Ensuring consistency across all processing phases
- **Compliance Checking**: Validation against French accounting regulations and PCG standards

#### Phase 5: Multi-Format Export & Integration
- **Export Format Support**: CSV, XML, JSON, Sage, and FEC format generation
- **Integration APIs**: RESTful APIs for ERP and accounting software integration
- **Audit Trail Generation**: Complete processing history for compliance and debugging
- **Performance Metrics**: Detailed analytics on processing efficiency and accuracy

---

## Async Processing & Task Management

### RabbitMQ-Based Background Processing

The platform implements **robust asynchronous processing** using RabbitMQ with an `aio-pika` consumer pool (`message_worker`) for reliable, horizontally-scalable task execution:

**Task Types**:
- **Single Invoice Processing**: Individual document processing with real-time status updates
- **Batch Processing**: Parallel processing of multiple invoices with configurable worker limits
- **Export Generation**: Background generation of accounting exports in multiple formats
- **System Maintenance**: Automated cleanup, optimization, and health monitoring tasks

**Performance Features**:
- **Parallel Execution**: Configurable worker pools for optimal resource utilization
- **Progress Tracking**: Real-time progress updates with detailed phase information
- **Error Recovery**: Automatic retry logic with exponential backoff and provider failover
- **Resource Management**: Intelligent memory and CPU usage optimization

---

## AI Agent Ecosystem

### Specialized AI Agents

Textra employs a **team-based AI architecture** with specialized agents for different accounting tasks:

#### Invoice QA Agent
**Specialization**: Document content analysis and question answering
**Capabilities**: RAG-based responses, detailed invoice analysis, cross-document comparisons
**Integration**: Vector search integration with comprehensive document indexing

#### Calculation Agent
**Specialization**: Financial calculations and analysis
**Capabilities**: VAT calculations, total verification, currency conversions, financial ratios
**Integration**: Direct integration with accounting models and validation systems

#### MongoDB Agent
**Specialization**: Database operations and analytics
**Capabilities**: Complex aggregation queries, statistical analysis, data mining operations
**Integration**: Full database access with query optimization and result caching

---
